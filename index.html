<html>
  <head>
    <style>
      .step
      {
      background-color:#eee;
      margin:.5em;
      padding:.5em;
      clear:both;
      overflow:auto;
      }
      canvas{
      float:right;
      background-color:white;
      border: thin black solid;
      }
      button{
        margin:.5em;
        padding:.5em;
        font-size: large;
        border-radius: .5rem;
        background-color: white;
      }
    </style>
    <script src="terrain.js"></script>
    <script src="terrainUI.js"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://d3js.org/d3-array.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>

  </head>
  <!--lets just get on with it-->
  <div class="step" style="display:inline-block;">
    <p>Generate some points on a flat, bounded plane</p>
    <canvas id="flatpoints" width="400" height="200" style="height:200px;width:400px;"></canvas>
    <script>
      var flatWorld=new TerrainUI(document.getElementById('flatpoints'));
    </script>
    <button onclick="flatWorld.generateAndVisualizePoints()">Generate Points</button>
    <button onclick="flatWorld.improveAndVisualizePoints()">Improve Points</button>
  </div>

  <!--basic transformations-->
  <div class="step" style="display:inline-block;">
    <p>Show the mesh instead of the points</p>
    <canvas id="basic" width="400" height="200" style="height:200px;width:400px;"></canvas>
    <script>
      var basic=new TerrainUI(document.getElementById('basic'));
    </script>
    <button onclick="basic.copyAndVisualizeMesh(flatWorld)">Copy from Above</button>
    <button onclick="basic.generateAndVisualizeMesh()">Generate Mesh</button>
    <br />
    <button onclick="basic.improveAndVisualizeMesh()">Improve Mesh</button>
  </div>

  <!--world projections-->
  <div class="step" style="display:inline-block;">
    <p>Sphere Projection</p>
    <canvas id="sphere" width="400" height="200" style="height:200px;width:400px;"></canvas>
    <script>
var geojson = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "Africa"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [[[-6, 36], [33, 30], [43, 11], [51, 12], [29, -33], [18, -35], [7, 5], [-17, 14], [-6, 36]]]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Australia"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [[[143, -11], [153, -28], [144, -38], [131, -31], [116, -35], [114, -22], [136, -12], [140, -17], [143, -11]]]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Timbuktu"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [-3.0026, 16.7666]
      }
    }
  ]
};

var context = d3.select('#sphere')
  .node()
  .getContext('2d');

var projection = d3.geoEquirectangular()
  //.scale(50)
  .translate([200, 150]);

var geoGenerator = d3.geoPath()
  .projection(projection)
  .context(context);

function update(geojson) {
  context.lineWidth = 0.5;
  context.strokeStyle = '#aaa';

  context.beginPath();
  geoGenerator({type: 'FeatureCollection', features: geojson.features})
  context.stroke();
}

update(geojson);

  </script>
    
  </div>

</html>